<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>the-order-of-symbols.txt</title>
<meta name="generator" content="emacs 25.0.50.4; htmlfontify 0.21" />
<style type="text/css"><!-- 
body { font-family: monospace;  font-stretch: normal;  font-weight: 700;  font-style: normal;  color: #ffffff;  background: #000000;  font-size: 10pt;  text-decoration: none; }
span.default   { font-family: monospace;  font-stretch: normal;  font-weight: 700;  font-style: normal;  color: #ffffff;  background: #000000;  font-size: 10pt;  text-decoration: none; }
span.default a { font-family: monospace;  font-stretch: normal;  font-weight: 700;  font-style: normal;  color: #ffffff;  background: #000000;  font-size: 10pt;  text-decoration: underline; }
span.type   { color: #98fb98;  font-family: monospace;  font-stretch: normal;  font-weight: 700;  font-style: normal;  background: #000000;  font-size: 10pt;  text-decoration: none; }
span.type a { color: #98fb98;  font-family: monospace;  font-stretch: normal;  font-weight: 700;  font-style: normal;  background: #000000;  font-size: 10pt;  text-decoration: underline; }
span.function-name   { color: #87cefa;  font-family: monospace;  font-stretch: normal;  font-weight: 700;  font-style: normal;  background: #000000;  font-size: 10pt;  text-decoration: none; }
span.function-name a { color: #87cefa;  font-family: monospace;  font-stretch: normal;  font-weight: 700;  font-style: normal;  background: #000000;  font-size: 10pt;  text-decoration: underline; }
span.keyword   { color: #00ffff;  font-family: monospace;  font-stretch: normal;  font-weight: 700;  font-style: normal;  background: #000000;  font-size: 10pt;  text-decoration: none; }
span.keyword a { color: #00ffff;  font-family: monospace;  font-stretch: normal;  font-weight: 700;  font-style: normal;  background: #000000;  font-size: 10pt;  text-decoration: underline; }
span.warning   { color: #ffc0cb;  font-weight: 700;  font-family: monospace;  font-stretch: normal;  font-style: normal;  background: #000000;  font-size: 10pt;  text-decoration: none; }
span.warning a { color: #ffc0cb;  font-weight: 700;  font-family: monospace;  font-stretch: normal;  font-style: normal;  background: #000000;  font-size: 10pt;  text-decoration: underline; }
span.constant   { color: #7fffd4;  font-family: monospace;  font-stretch: normal;  font-weight: 700;  font-style: normal;  background: #000000;  font-size: 10pt;  text-decoration: none; }
span.constant a { color: #7fffd4;  font-family: monospace;  font-stretch: normal;  font-weight: 700;  font-style: normal;  background: #000000;  font-size: 10pt;  text-decoration: underline; }
span.string   { color: #ffa07a;  font-family: monospace;  font-stretch: normal;  font-weight: 700;  font-style: normal;  background: #000000;  font-size: 10pt;  text-decoration: none; }
span.string a { color: #ffa07a;  font-family: monospace;  font-stretch: normal;  font-weight: 700;  font-style: normal;  background: #000000;  font-size: 10pt;  text-decoration: underline; }
span.comment   { color: #ff7f24;  font-family: monospace;  font-stretch: normal;  font-weight: 700;  font-style: normal;  background: #000000;  font-size: 10pt;  text-decoration: none; }
span.comment a { color: #ff7f24;  font-family: monospace;  font-stretch: normal;  font-weight: 700;  font-style: normal;  background: #000000;  font-size: 10pt;  text-decoration: underline; }
span.comment-delimiter   { color: #ff7f24;  font-family: monospace;  font-stretch: normal;  font-weight: 700;  font-style: normal;  background: #000000;  font-size: 10pt;  text-decoration: none; }
span.comment-delimiter a { color: #ff7f24;  font-family: monospace;  font-stretch: normal;  font-weight: 700;  font-style: normal;  background: #000000;  font-size: 10pt;  text-decoration: underline; }
 --></style>

    <script type="text/javascript"><!--
  // this function is needed to work around
  // a bug in IE related to element attributes
  function hasClass(obj)
  {
      var result = false;
      if (obj.getAttributeNode("class") != null)
      {
          result = obj.getAttributeNode("class").value;
      }
      return result;
  }

  function stripe(id)
  {
      // the flag we'll use to keep track of
      // whether the current row is odd or even
      var even = false;

      // if arguments are provided to specify the colors
      // of the even & odd rows, then use the them;
      // otherwise use the following defaults:
      var evenColor = arguments[1] ? arguments[1] : "#fff";
      var oddColor  = arguments[2] ? arguments[2] : "#ddd";

      // obtain a reference to the desired table
      // if no such table exists, abort
      var table = document.getElementById(id);
      if (! table) { return; }

      // by definition, tables can have more than one tbody
      // element, so we'll have to get the list of child
      // &lt;tbody&gt;s
      var tbodies = table.getElementsByTagName("tbody");

      // and iterate through them...
      for (var h = 0; h < tbodies.length; h++)
      {
          // find all the &lt;tr&gt; elements...
          var trs = tbodies[h].getElementsByTagName("tr");

          // ... and iterate through them
          for (var i = 0; i < trs.length; i++)
          {
              // avoid rows that have a class attribute
              // or backgroundColor style
              if (! hasClass(trs[i]) &&
                  ! trs[i].style.backgroundColor)
              {
                  // get all the cells in this row...
                  var tds = trs[i].getElementsByTagName("td");

                  // and iterate through them...
                  for (var j = 0; j < tds.length; j++)
                  {
                      var mytd = tds[j];

                      // avoid cells that have a class attribute
                      // or backgroundColor style
                      if (! hasClass(mytd) &&
                          ! mytd.style.backgroundColor)
                      {
                          mytd.style.backgroundColor =
                            even ? evenColor : oddColor;
                      }
                  }
              }
              // flip from odd to even, or vice-versa
              even =  ! even;
          }
      }
  }

  function toggle_invis( name )
  {
      var filter =
        { acceptNode:
          function( node )
          { var classname = node.id;
            if( classname )
            { var classbase = classname.substr( 0, name.length );
              if( classbase == name ) { return NodeFilter.FILTER_ACCEPT; } }
            return NodeFilter.FILTER_SKIP; } };
      var walker = document.createTreeWalker( document.body           ,
                                              NodeFilter.SHOW_ELEMENT ,
                                              filter                  ,
                                              false                   );
      while( walker.nextNode() )
      {
          var e = walker.currentNode;
          if( e.style.display == "none" ) { e.style.display = "inline"; }
          else                            { e.style.display = "none";   }
      }
  }
--> </script>
  </head>
  <body onload="stripe('index'); return true;">

<pre><span class="comment-delimiter">;; </span><span class="comment">-*- mode: lisp -*-
</span><span class="comment-delimiter">;;</span><span class="comment">
</span><span class="comment-delimiter">;;</span><span class="comment">
</span><span class="comment-delimiter">;; </span><span class="comment">Questions, comments or problems? Email root@busfactor1.ca
</span><span class="comment-delimiter">;;</span><span class="comment">
</span><span class="comment-delimiter">;; </span><span class="comment">WORK IN PROGRESS
</span><span class="comment-delimiter">;;</span><span class="comment">
</span>
===============================================================================
===============================================================================

                        ======================
                        |The Order of Symbols|
                        ======================

 <span class="string">&quot;...there once existed a language which perfectly and unambiguously
    expressed the essence of all possible things and concepts...&quot;</span>

        -- Umberto Eco - /The Search for the Perfect Language/

   <span class="string">&quot;Most good programmers do programming not because they expect to
  get paid or get adulation by the public, but because it is fun to
                              program.&quot;</span>

                          -- Linus Torvalds

        <span class="string">&quot;Computers are good at following instructions, but not
                        at reading your mind.&quot;</span>

                           -- Donald Knuth

===============================================================================
===============================================================================

Lisp as a computer programming language is as Latin is to English or
modern day Italian.  It is the second oldest high level computer
language still in use, invented (or found) in the 1950's by John
McCarthy and is the most powerful and expressive programming language
there is [citation needed].  Lisp comes in many shapes and forms and
Sigil, the Lisp used in Eturia, is no different.  It is a '<span class="constant">dialect</span>' of
Lisp, as Lisp is more of an idea than a concrete thing, with all
dialects looking similar, but behaving, sometimes, very differently.
And like any dialect of a language, it is malleable and modifiable,
something which I will show you though this document as we build our
language from base principals (axioms).

The following is meant to be both an introduction and reference to
Sigil.  You will find an explanation of syntax, followed by a brief
explanation of Eturia, the Listener and Window Manager, followed by
the list of builtins, and then a set of examples that can be followed
along and typed into the Eturia Listener, which can be found at:

    http://busfactor1.ca/bin/eturia/client/dev.html

This paper is intended to follow the ideas of Guy Steele in his
talk/paper 'Growing a language':

    https://www.cs.virginia.edu/~evans/cs655/readings/steele.pdf
    https://www.youtube.com/watch?v=_ahvzDzKdB0

All terms in the following text are (hopefully) defined before use.


Intended Audience
-----------------

This work is intended for both beginners and professionals alike.  For
beginners, if they work through the exercies, should gain an
understanding for all of the code and exercises given, with a little
thought.  Professionals may benefit in the same way, finding the
material refreshing over the typical code chaos one might see at work,
while learning something new and, hopefully, interesting: programming
language design and implementation.

The main desire of the reader should be to learn to program.  This is
not a traditional programming course in any way and will teach you
little on how to get a job as a programmer.  But knowing what this
course will teach you will benefit you for as long as you act as a
programmer during your life [citation needed].

This course assumes a basic understanding of arithmetic and algebra,
along with the idea that a computer is something that simply follows
the instructions that they are told, nothing more.  As Picasso
noted, <span class="string">&quot;Computers...they can only give you answers.&quot;</span>


Eturia
------

Eturia is a (similated) computer for Computer Science Education.  It
is designed to be simple and limited, perfect for teaching and
learning with few distractions.  Although probably unfamiliar at
first, it's spartan interface can be quickly learned by any newcomer
with its few and simple commands. Finally, it runs in a Web browser,
so it is accessable from any location with an internet connection.

The current version of Eturia can always be found at:

    http://busfactor1.ca/bin/eturia

along with videos and other information about the project.


The Listener
------------

There is no copy/pasting in Eturia.  To enter the code, it must be
typed manually into the '<span class="constant">Listener</span>'.  This way the code will go through
your fingers and your brain, giving you a better chance of learning
the concepts as you go along and build your own language in Sigil.

This '<span class="constant">Listener</span>' is like Like VI, but a bit different[1]:

i - insert mode, allows you to type overwrite text in the buffer
? - command mode, allows you to execute the following commands
    and break out of insert mode
hjkl - move the cursor left, down, up, or right (h,j,k,l)
e - evaluate lisp code
z - clear the screen
np - previous/next in history (experimental)

To type characters use '<span class="constant">insert</span>' (overwrite) mode by pressing 'i'. You
can tell when you are in '<span class="constant">insert</span>' mode by the GREEN border around the
console.  To '<span class="constant">escape</span>' out of insert mode, press '?'.

REMEMBER TO CLICK IN THE WINDOW TITLE BEFORE TRYING TO TYPE IN THE
LISTENER.

[1] VI and Emacs are programmers text editors.  There has been a
decades long debate over the merits and benfits of using each.  Emacs
is a modern day Lisp Machine, VI is akin to a Unix machine.  I chose a
VI-like editor interface for Eturia due to the simplicity of
implementing it.

Window Manager
--------------

    - click in title bar to focus window
    - click and drag in title bar to move window
    - middle click in title bar to remove window

======
Syntax
======

The following is the syntax of Sigil:

Numbers - a string of digits
----------------------------

A number can be used with mathematical functions and should be
familiar to all that have taken introductory mathmatics.

Example:

    1 is a number
    100 is a number
    3.141516 is a number
    -3 is a number


Symbol - a string of characters
-------------------------------

A symbol is a string of characters not containing '(', or ')'.

Example:

    x is a symbol
    abc is a symbol
    x123 is a symbol
    123x is a symbol
    a-longer-symbol is a symbol
    |a symbol with spaces| is a symbol


Comments - a note to your self
------------------------------

Comments can be important in programs as they are used to explain the
purpose of the code you are writing.

Example:

    <span class="comment">; this is a comment
</span>

Quoting - stops evaluation
--------------------------

Evaluation means to 'get the value of something'.  Sometimes you want
this to not happen and just get '<span class="constant">something</span>'.  Quoting is used for that
and is an essential part of the following examples.

Example:
1 =&gt; 1
`1 =&gt; 1
x =&gt; <span class="comment">; Error, undefined symbol
</span>`x =&gt; x
(1 2 3) =&gt; <span class="comment">; Error, undefined function
</span>`(1 2 3) =&gt; (1 2 3)


List - build lists
------------------

Besides numbers and symbols, Sigil also has '<span class="constant">lists</span>'.  A list is a
collection of things, being symbols, numbers or other lists.

Example:

    `() =&gt; ()<span class="comment">; the empty list
</span>    `(1) =&gt; (1) <span class="comment">; a '</span><span class="constant">proper</span><span class="comment">' list containing the digit 1
</span>    `(1 . ()) =&gt; (1) <span class="comment">; a '</span><span class="constant">proper</span><span class="comment">' list containing the digit 1</span><span class="comment">
</span>    `(1 2 3) =&gt; (1 2 3) <span class="comment">; is a '</span><span class="constant">proper</span><span class="comment">' list of the digits 1 2 3</span><span class="comment">
</span>    `(1 2 3 . ()) =&gt; (1 2 3) <span class="comment">; is a '</span><span class="constant">proper</span><span class="comment">' list of the digits 1 2 3
</span>    `(1 . 2) =&gt; (1 . 2) <span class="comment">; is an '</span><span class="constant">improper</span><span class="comment">' list of the digits 1 and 2</span><span class="comment">
</span>    `(x . y) =&gt; (x . y) <span class="comment">; is an '</span><span class="constant">improper</span><span class="comment">' list of the symbols x and y</span><span class="comment">
</span>
A proper list has () as its last element, and it is not normally
shown.  An improper list does not have () as it's last element, and
this is shown by preceeding the last element with a dot.

Note: even the code in Sigil is lists.  This is a very iportant
concept to remember, as Sigil is all about building and generating
code using the functions we are going to be defining in the following
chapters.


Comma ',' - evaulate inside of a quote
---------------------------------------

Sometimes you want to quote a list, but also want to include the
values of other symbols inside of it.  To perform this action, you use
the comma operator inside of a quoted list.

Example:

    (set `x 1) =&gt; 1
    x =&gt; 1
    `(x 2 3) =&gt; (x 2 3)
    `(,x 2 3) =&gt; (1 2 3)


Commaat ',@' - evaluate a list inside of a quote, and splice it
----------------------------------------------------------------

Other times when building code, you want to embed the contents of a
list inside of a quoted list.  This is done with the commaat (,@)
operator inside of a quoted list.

Example:

    (set `x `(a b c))
    x =&gt; (a b c)
    `(x 1 2 3) =&gt; (x 1 2 3)
    `(,x 1 2 3) =&gt; ((a b c) 1 2 3)
    `(,@x 1 2 3) =&gt; (a b c 1 2 3)


NOTE: SYMBOLS AND NUMBERS ARE ALSO KNOWN AS ATOMS.

 -------------------------------------------------
| Booleans - () is false, everything else is true |
 -------------------------------------------------

As in most languages, Sigil has the idea of booleans, true and false.
In this case, the empty list, () is '<span class="constant">false</span>' and everything else is
'<span class="constant">true</span>'.  A special symbol 't' is defined to represent truth when
needed, but is not required to be used.

Functions that are meant to return either a true or false value are
known as '<span class="constant">predicates</span>'.

Builtins
========

The following are the builtin commands for Sigil.  A builtin is a
function that is available by default in the language and is always
available.

Note: in the Examples, '<span class="constant">=&gt;</span>' means 'evaulates to' or 'the value of'.

0) <span class="warning">quote - prevent evaluation</span>
-----------------------------

Evaluation means to 'give me the value of something', and to prevent
the evauation of something means to just 'give me something'.
Sometimes you want, in a list, to say 'just give me these things but
give me the value of these other things', which can be done with ','
and ',@'.

Example:

    1 =&gt; 1 <span class="comment">; 'give me the value of' 1
</span>    `1 =&gt; 1 <span class="comment">; 'give me' 1
</span>    x =&gt; <span class="comment">; 'give me the value of' x, error, as x has no value</span><span class="comment">
</span>    `x =&gt; x <span class="comment">; 'give me' x</span><span class="comment">
</span>    `(1 2 3) =&gt; (1 2 3) <span class="comment">; give me the list of digits 1, 2 and 3
</span>
    <span class="comment-delimiter">;; </span><span class="comment">ADVANCED, unquoting with ',' and splicing with ',@'
</span>    (set `x 1) =&gt; 1 <span class="comment">; give x the value 1
</span>    `(,x 2 3) =&gt; (1 2 3) <span class="comment">; evaluate inside of a quoted list with ,
</span>    `(,@x 2 3) =&gt; (1 2 3) <span class="comment">; Error, cannot unquote '</span><span class="constant">splice</span><span class="comment">' a non-list
</span>    (set `x `(1 2 3)) =&gt; (1 2 3) <span class="comment">; give x a value that is a list
</span>    `(,x 2 3) =&gt; ((1 2 3) 2 3) <span class="comment">; unquote (evaulate) x with ,
</span>    `(,@x 2 3) =&gt; (1 2 3 2 3) <span class="comment">; '</span><span class="constant">splice</span><span class="comment">' with ,@</span><span class="comment">
</span>
1) <span class="warning">atom - a predicate to test if its argument is an atom</span>
--------------------------------------------------------

Everything in Sigil is either an atom (symbol, number, or ()) or a
list.

Example:

    (atom t) =&gt; t
    (atom ()) =&gt; t
    (atom `x) =&gt; t
    (atom 1) =&gt; t
    (atom `(1 2 3)) =&gt; ()

2) <span class="warning">eq - equality</span>
----------------

Atoms can be tested for equality using '<span class="constant">eq</span>'.

Example:

    (eq t t) =&gt; t
    (eq () ()) =&gt; t
    (eq t ()) =&gt; ()
    (eq `x `x) =&gt; t
    (eq `x `y) =&gt; ()
    (eq 1 1) =&gt; t
    (eq 1 2) =&gt; ()
    (eq `(1 2 3) `(1 2 3)) =&gt; () <span class="comment">; notice! see '</span><span class="constant">equal</span><span class="comment">', below.
</span>
3) <span class="warning">cons - create a new list cell</span>
--------------------------------

A cons cell is a 2 element cell that has a head slot and an a tail
slot.  The '<span class="constant">cons</span>' function allocates one of these cells and assigns
the first argument to the head slot and the second argument to the
tail slot.

Example:

    (cons 1 ()) =&gt; (1)
    (cons `x ()) =&gt; (x)
    (cons () ()) =&gt; (())
    (cons `x `y) =&gt; (x . y) <span class="comment">; notice! an improper lis</span><span class="comment">t
</span>    (cons 1 2) =&gt; (1 . 2) <span class="comment">; and again</span><span class="comment">
</span>    (cons (1 (cons 2 ()))) =&gt; (1 2) <span class="comment">; making a proper list
</span>
4) <span class="warning">car - return the first element of a list</span>
-------------------------------------------

Take a list and return the head slot of its first cell.

Example:

    (car `(1 2 3)) =&gt; 1
    (car `((1 2 3) 2 3)) =&gt; (1 2 3)
    (car ()) =&gt; ()
    (car `x) =&gt; <span class="comment">; Error</span><span class="comment">
</span>    (car 1) =&gt; <span class="comment">; Error</span><span class="comment">
</span>
5) <span class="warning">cdr - return everything but the first element of a list</span>
----------------------------------------------------------

Take a list and return the tail slot of its first cell.

Example:

    (cdr `(1 2 3)) =&gt; (2 3)
    (cdr `((1 2 3) 2 3)) =&gt; (2 3)
    (cdr ()) =&gt; ()
    (cdr `x) =&gt; <span class="comment">; Error
</span>    (cdr 1) =&gt; <span class="comment">; Error
</span>
6) <span class="warning">cond - conditional statement, execute tests until one returns not (),</span>
          and then execute the following statement
------------------------------------------------------------------------

Cond is used to make decisions on what statements to execute.  It goes
through it's arguments, excuting the each test, the first element of
the argument, until one of them returns not (), after which it then
excutes the statements following the test and returns the value of the
last one.  You will often set 't' as the last test in a cond, meaning
to always excute that set of statements if none of the previous tests
pass.

Example:

    (<span class="keyword">cond</span> (t 1)) =&gt; 1
    (<span class="keyword">cond</span> (() 1)) =&gt; ()
    (<span class="keyword">cond</span> ((t 1) (t 2))) =&gt; 1
    (<span class="keyword">cond</span> ((() 1) (t 2))) =&gt; 2
    (<span class="keyword">cond</span> ((() 1) (() 2) (t 3))) =&gt; 3
    (<span class="keyword">cond</span> ((() 1) (t 2) (t 3))) =&gt; 2
    (set `x ())
    (set `y t)
    (<span class="keyword">cond</span>
      (x `shouldnt-get-here)
      (y `should-get-here)
      (t `wont-get-here)) <span class="warning">=&gt; should-get-here</span>

7) <span class="warning">set - assign a symbol a value (variables)</span>
--------------------------------------------

Sometimes it is convenient to create a shortcut to certain values,
known as a variable. '<span class="constant">set</span>' can be used to create or change the values
of symbols in the variable namespace.

Example:

    (set `x 1) =&gt; 1
    x =&gt; 1
    (set `x 2) =&gt; 2
    x =&gt; 2
    (set `x `(1 2 3)) =&gt; (1 2 3)
    x =&gt; (1 2 3)
    (set `x 1 `y 2 `z 3) =&gt; 3

8) <span class="warning">lambda - create a function</span>
-----------------------------

A function is a set of variables and a series of statements, which can
be '<span class="constant">called</span>', assigning values to the variables and executing the
statements sequentially, until the value of the last one is returned
to the caller.

Example:

    (<span class="keyword">lambda</span> (x) x) =&gt; (<span class="keyword">lambda</span> (x) x)
    ((<span class="keyword">lambda</span> (x) x) 1) =&gt; 1 <span class="comment">; call the function immediately
</span>    ((<span class="keyword">lambda</span> (x) (+ x x)) 2) =&gt; 4 <span class="comment">; x is bound to 2
</span>    ((<span class="keyword">lambda</span> (x y) (* x y)) 2 3) =&gt; 6 <span class="comment">; x is bound to 2, y is bound to 3
</span>    (set `double (<span class="keyword">lambda</span> (x) (+ x x))) =&gt; ... <span class="comment">; declare a named function
</span>    (double 2) =&gt; 4 <span class="comment">; call declared function
</span>
9) <span class="warning">self - the current function that is executing, used for recursion</span>
---------------------------------------------------------------------

<span class="string">&quot;To iterate is human, to recurse divine.&quot;</span>
  -- L. Peter Deutsch

Recursion is a fundamental concept used for looping, or doing
something more than once.  To count the number of elements in a list,
one can break the problem into counting the first element of the list,
which is always 1, and adding that to the number of elements in the
rest of the list.  This can be done in a function by calling itself,
or recursing, with the rest of the list the empty list is found.

Example:

((<span class="keyword">lambda</span> (l n)
   (<span class="keyword">cond</span>
     ((cdr l)
      (self (cdr l) (+ 1 n)))
     (t
      n)))`(a b c) 0) =&gt; 3 <span class="comment">; return the length of a list,</span><span class="comment">
</span>                           <span class="comment">; recursively
</span>
    ((<span class="keyword">lambda</span> (l)
       (<span class="keyword">cond</span>
         ((null (cdr l))
          (car l))
         (t
          (self (cdr l))))) `(1 2 3)) =&gt; (3) <span class="comment">; return the last element</span><span class="comment">
</span>                                             <span class="comment">; of the list, recursively
</span>
10) <span class="warning">apply - call a function with a list of arguments</span>
----------------------------------------------------

Call a function with a list of arguments.

Example:

    (apply (<span class="keyword">lambda</span> (x) (+ x x)) `(1)) =&gt; 2
    (apply (<span class="keyword">lambda</span> (x y z) (+ x y z)) `(1 2 3)) =&gt; 6
    (apply double 2) =&gt; 4 <span class="comment">; using previously defined function in 9)
</span>
11) <span class="warning">values - return multiple values from a function</span>
---------------------------------------------------

For when you want to return more than one value from a function.

Example:

    (values 1) =&gt; 1
    (values 1 2) =&gt; 1
    2
    ((<span class="keyword">lambda</span> (x) (values x)) 1) =&gt; 1
    ((<span class="keyword">lambda</span> (x y) (values x y)) 1 2) =&gt; 1
    2

12) <span class="warning">bind - bind multiple values to symbols</span>
------------------------------------------

For when a function returns more than one value, you can '<span class="constant">bind</span>' the
returned values returned to names and excute the statements in the
body using these bindings.

Example:

    (set `multiple-values (<span class="keyword">lambda</span> (x y) (values x y))) =&gt; ...
    (bind (a b) (multiple-values 1 2) (cons a b)) =&gt; (1 . 2)

13) <span class="warning">defmacro - define a macro</span>
-----------------------------

Define a symbol in the function namespace that when called, like a
function, has it's body executed which is to return '<span class="constant">code</span>' that is
then executed.  This is in contrary to regular functions that can
return anything.  Macros are a powerful tool that give Lisp it's power
and allow you to grow the language in a way that is no different than
adding primitives to itself, but on '<span class="constant">top</span>' of the language rather than
from the '<span class="constant">bottom</span>'.


There are many examples that follow that use defmacro, so study them
carefully to understand it's use.

14) <span class="warning">+ - addition, sum</span>
---------------------

Mathematical addition, or sum with more than 2 arguments.  Also used
to concatenate symbols.

Example:

    (+ 1 2) =&gt; 3
    (+ 1 2 3) =&gt; 6
    (+ `x `y) =&gt; xy

15) <span class="warning">- - subtraction, difference</span>
-------------------------------

Mathematical subtraction, or difference with more than 2 arguments.

    (- 1 2) =&gt; -1
    (- 1 2 3) =&gt; -4

16) <span class="warning">* - multiply, product</span>
-------------------------

Mathematical multiply, or product with more than 2 arguments.

    (* 1 2) =&gt; 2
    (* 1 2 3) =&gt; 6

17) <span class="warning">/ - divide, quotient</span>
------------------------

Mathematical divide, or quotient with more than 2 arguments.

Example: 

    (/ 1 2) =&gt; .5
    (/ 1 2 3) =&gt; 0.1666....

18) <span class="warning">% - remainder, mod</span>
----------------------

Mathematical remainder, or '<span class="constant">mod</span>'.

Example:

    (% 5 2) =&gt; 1

19) <span class="warning">env - return the current environment</span>

Example:

     (env) =&gt; ((t . t) ...)

20) <span class="warning">fenv - return the current function environment</span>

Example:

    (fenv) =&gt; ((set . builtin) (cons . builtin) ...)

21) <span class="warning">save - save the current environment</span>
---------------------------------------

The environment where you store your variables and macros can be saved
to local storage in your browser using the '<span class="constant">save</span>' command.

(save) =&gt; <span class="comment">; default /core is saved
</span>(save /backup) =&gt; <span class="comment">; saved to /backup in local storage
</span>
22) <span class="warning">load - load a core into the current environment</span>

The environment can be loaded from local storage using the '<span class="constant">load</span>' command.

THIS FEATURE IS CURRENTLY NOT IMPLMENTED.

23) <span class="warning">me - macro expand</span>
---------------------

Expand macros in the code given as an argument.  Helpful for
debugging.

Example: (me (cadr `(1 2 3))) =&gt; (car (cdr `(1 2 3)))

24) <span class="warning">=&gt; - evaluate javascript code</span>
---------------------------------

Used to execute javascript code that can be built by concatenating symbols.

(=&gt; |console.log(&quot;Testing&quot;)|) =&gt; <span class="comment">; prints Testing in the javascript console
</span>
This builtin allows for the interaction between Sigil and the
underlying web browser. It is an advanced operation that will be used
to build Eturia as a Lisp Machine from within Sigil itself.  Eturia is
written in Javascript, but the goal of the system is to modify the
javascript code as little as possible from outside of it.


===============================================================================
===============================================================================

                             ============
                             |The Basics|
                             ============


    <span class="string">&quot;..an individual's thoughts and actions are determined by the
                             language..&quot;</span>

                    -- The Sapir-Whorf Hypothesis
   
            <span class="string">&quot;Lisp is a programmable programming language.&quot;</span>

                           -- John Foderaro

                  <span class="string">&quot;Talk is cheap. Show me the code.&quot;</span>

                          -- Linus Torvalds


===============================================================================
===============================================================================


The following exercies build upon the primitives defined above and are
meant to be typed into the Eturia '<span class="constant">Listener</span>' console.  The '<span class="constant">Examples</span>'
can be used as test cases to ensure the correctness of your inputs.

0) <span class="warning">first, second, third, rest - shortcuts</span>
-----------------------------------------

(<span class="keyword">defmacro</span> <span class="function-name">first</span> (x)
  `(car ,x))

(<span class="keyword">defmacro</span> <span class="function-name">second</span> (x)
  `(car (cdr ,x)))

(<span class="keyword">defmacro</span> <span class="function-name">third</span> (x)
  `(car (cdr (cdr ,x))))

(<span class="keyword">defmacro</span> <span class="function-name">rest</span> (x)
  `(cdr ,x))

Examples:

    (first `(1 2 3)) =&gt; 1
    (second `(1 2 3)) =&gt; 2
    (third `(1 2 3)) =&gt; 3
    (rest `(1 2 3)) =&gt; (2 3)

1) <span class="warning">if - tradional conditional</span>
-----------------------------

(<span class="keyword">defmacro</span> <span class="function-name">if</span> (test true false)
  (<span class="keyword">cond</span>
    (,test ,true)
    (t ,false)))
    
Example: 

    (<span class="keyword">if</span> (eq t t) 1 2) =&gt; 1
    (<span class="keyword">if</span> (eq t ()) 1 2) =&gt; 2

2) <span class="warning">when - single branch conditional</span>
-----------------------------------

(<span class="keyword">defmacro</span> <span class="function-name">when</span> (test <span class="type">&amp;body</span> body)
  (<span class="keyword">cond</span>
    (,test ,@body)))

Example: 
    (<span class="keyword">when</span> (eq t t) 1) =&gt; 1
    (<span class="keyword">when</span> (eq t ()) 1) =&gt; ()

3) <span class="warning">unless - negative single branch conditional</span>
----------------------------------------------

(<span class="keyword">defmacro</span> <span class="function-name">unless</span> (test <span class="type">&amp;body</span> body)
  (<span class="keyword">cond</span> ,test ,@body))

Example:
    (<span class="keyword">unless</span> (eq t t) 1) =&gt; ()
    (<span class="keyword">unless</span> (eq t ()) 1) =&gt; 1

4) <span class="warning">reverse - reverse a list</span>
---------------------------

(<span class="keyword">defmacro</span> <span class="function-name">reverse</span> (l)
  `((<span class="keyword">lambda</span> (l a)
      (<span class="keyword">if</span> l
          (self (cdr l) (cons (car l) a))
          a))))

Example: 

    (reverse `(1 2 3)) =&gt; (3 2 1)

5) <span class="warning">map - build a list by running the function f ovar the entries in</span>
         list l
-------------------------------------------------------------------

(<span class="keyword">defmacro</span> <span class="function-name">map</span> (f l)
  `((<span class="keyword">lambda</span> (l a)
      (<span class="keyword">if</span> l
          (self (cdr l) (cons (,f (car l))))
          (reverse a))) <span class="warning">,l ()))</span>

Example:

    (map (<span class="keyword">lambda</span> (x) (+ x x)) `(1 2 3)) =&gt; (2 4 6)

5.5) <span class="warning">caar, cadr, cdar and cddr - shortcuts</span>
------------------------------------------

(<span class="keyword">defmacro</span> <span class="function-name">caar</span> (x)
  `(car (car ,x)))

(<span class="keyword">defmacro</span> <span class="function-name">cadr</span> (x)
  `(car (cdr ,x)))

(<span class="keyword">defmacro</span> <span class="function-name">cdar</span> (x)
  `(cdr (car ,x)))

(<span class="keyword">defmacro</span> <span class="function-name">cddr</span> (x)
  `(cdr (cdr ,x)))

6) <span class="warning">let - declare local variables</span>
--------------------------------

(<span class="keyword">defmacro</span> <span class="function-name">let</span> (args <span class="type">&amp;body</span> body)
  (<span class="keyword">lambda</span> (vars values)
    `((<span class="keyword">lambda</span> ,vars ,@body) ,@args)
    (map car args)
    (map cadr args))) <span class="comment">; FIXME: this should work, if not, try the below version
</span>
(<span class="keyword">defmacro</span> <span class="function-name">let</span> (args <span class="type">&amp;body</span> body)
  (<span class="keyword">lambda</span> (vars values)
    `((<span class="keyword">lambda</span> ,vars ,@body) ,@args)
    (map car args)
    (map (<span class="keyword">lambda</span> (x) (car (cdr x)) args))))

Examples:

    (<span class="keyword">let</span> ((x 1) (y 2)) (+ x y)) =&gt; 3

7) <span class="warning">aif - anamorphic if</span>
----------------------

(<span class="keyword">defmacro</span> <span class="function-name">aif</span> (test true false)
  `(<span class="keyword">let</span> ((it ,test))
     (<span class="keyword">if</span> it ,true ,false)))

8) <span class="warning">awhen - anamorphic when</span>
--------------------------

(<span class="keyword">defmacro</span> <span class="function-name">awhen</span> (test <span class="type">&amp;body</span> body)
  `(<span class="keyword">let</span> ((it ,test))
     (<span class="keyword">when</span> it ,@body)))

9) <span class="warning">not - logical compliment</span>
---------------------------

(<span class="keyword">defmacro</span> <span class="function-name">not</span> (x)
  `((<span class="keyword">lambda</span> (x)
      (<span class="keyword">cond</span>
        ((null x) t)
        (t ())))))

Examples:

    (not ()) =&gt; t
    (not t) =&gt; ()
    (not 1) =&gt; ()

10) <span class="warning">and - logical and</span>
---------------------

(<span class="keyword">defmacro</span> <span class="function-name">and</span> (<span class="type">&amp;rest</span> args)
  `((<span class="keyword">lambda</span> (args)
      (<span class="keyword">if</span> args
          (<span class="keyword">if</span> (eval (car args))
              (self (cdr args))
              ())
          t)) <span class="warning">`,args))</span>

Examples:

    (and () ()) =&gt; ()
    (and () t) =&gt; ()
    (and t ()) =&gt; ()
    (and t t) =&gt; t
    (and 1 1) =&gt; t

11) <span class="warning">or - logicial or</span>
---------------------

(<span class="keyword">defmacro</span> <span class="function-name">or</span> (<span class="type">&amp;rest</span> args)
  `((<span class="keyword">lambda</span> (args)
      (<span class="keyword">if</span> args
          (<span class="keyword">if</span> (eval (car args))
              t
              (self (cdr args)))
          ())) <span class="warning">`,args))</span>

Examples:

    (or () ()) =&gt; ()
    (or () t) =&gt; t
    (or t ()) =&gt; t
    (or t t) =&gt; t
    (or 1 1) =&gt; t

12) <span class="warning">xor - logical exclusive or</span>

(<span class="keyword">defmacro</span> <span class="function-name">xor</span> (x y)
  `(<span class="keyword">let</span> ((xe ,x)
         (ye ,y))
     (and
      (or xe ye)
      (not (and xe ye)))))

Examples:

    (xor () ()) =&gt; ()
    (xor t ()) =&gt; t
    (xor () t) =&gt; t
    (xor t t) =&gt; ()


<span class="comment-delimiter">;; </span><span class="comment">WARNING: THE FOLLOWING CODE IS ALL UNTESTED
</span>
13) <span class="warning">length - return the length of a list</span>
----------------------------------------

(<span class="keyword">defmacro</span> <span class="function-name">length</span> (l)
  `((<span class="keyword">lambda</span> (l n)
      (<span class="keyword">if</span> l
          (self (cdr l) (+ n 1))
          n)) <span class="warning">,l))</span>

Examples:

    (length ()) =&gt; 0
    (length `(1 2 3)) =&gt; 3
    (length `((1 2 3) a b c)) =&gt; 4

13) <span class="warning">mapn - like map, but takes n lists as arguments (map is faster)</span>
------------------------------------------------------------------

(<span class="keyword">defmacro</span> <span class="function-name">mapn</span> (f <span class="type">&amp;rest</span> xs)
  `((<span class="keyword">lambda</span> (a xs)
      (<span class="keyword">let</span> ((hs (map car xs)))
        (self (cons (eval `(apply ,f ,@xs)) a) (cdr xs))
        (reverse a))) <span class="warning">() ,xs))</span>

Examples:

    (mapn (<span class="keyword">lambda</span> (x y) (+ x y)) `(1 2 3) `(1 2 3)) =&gt; (2 4 6)
    (mapn (<span class="keyword">lambda</span> (x y) (+ x y)) `(x y z) `(a b c) `(1 2 3)) =&gt; (xa1 yb2 zc3)

14) <span class="warning">setq</span>

(<span class="keyword">defmacro</span> <span class="function-name">setq</span> (<span class="type">&amp;rest</span> rest)
  (<span class="keyword">lambda</span> (vars values)
    `(mapn (<span class="keyword">lambda</span> (var value)
             (set var value)) <span class="warning">,vars ,values)</span>
    (map car vars)
    (map cadr vars)))

Examples:

    (setq x 1) =&gt; 1
    x =&gt; 1
    (setq x 2 y 3) =&gt; 3
    x =&gt; 2
    y =&gt; 3

15) <span class="warning">last - return the last element of a list</span>
--------------------------------------------

(<span class="keyword">defmacro</span> <span class="function-name">last</span> (l)
  `((<span class="keyword">lambda</span> (l)
      (<span class="keyword">if</span> (cdr l)
          (self (cdr l))
          (car l)))) <span class="warning">,l))</span>

Examples:

(last `(1 2 3)) =&gt; 3

16) <span class="warning">nth - return the nth element of a list</span>
------------------------------------------

(<span class="keyword">defmacro</span> <span class="function-name">nth</span> (n l)
  `((<span class="keyword">lambda</span> (n l)
      (<span class="keyword">if</span> (eq n 0)
          l
          (self (- n 1) (cdr l))))) <span class="warning">,n ,l)</span>

Examples:

    (nth 0 `(1 2 3)) =&gt; 1
    (nth 1 `(1 2 3)) =&gt; 2
    (nth 2 `(1 2 3)) =&gt; 3

17) <span class="warning">equal - compare if two things are equal, including lists</span>
------------------------------------------------------------

(<span class="keyword">defmacro</span> <span class="function-name">equal</span> (x y)
  `((<span class="keyword">lambda</span> (x y)
      (<span class="keyword">cond</span>
        ((and (atom x) (atom y)) (eq x y))
        ((and (null x) (null y)) t)
        (t
         (self (cdr x) (cdr y))))) <span class="warning">,x ,y))</span>

18) <span class="warning">pallindromep - see if a list is the same forwards and backwards</span>
-------------------------------------------------------------------

(<span class="keyword">defmacro</span> <span class="function-name">pallindromep</span> (l)
  `(equal l (reverse l)))

Examples:

    (pallindromep `(1 2 3)) =&gt; ()
    (pallindromep `(1 2 3 2 1)) =&gt; t

19) <span class="warning">ls - list the current environment, briefly</span>

(<span class="keyword">defmacro</span> <span class="function-name">ls</span> ()
  `(map car (env)))

Examples:

    (ls) =&gt; (t ...)

20) <span class="warning">lsf - list the current function environment, briefly</span>

(<span class="keyword">defmacro</span> <span class="function-name">ls</span> ()
  `(map car (fenv)))

Examples:

    (lsf) =&gt; (atom eval ...)

21) <span class="warning">list - create a proper list of all arguments</span>

(<span class="keyword">defmacro</span> <span class="function-name">list</span> (<span class="type">&amp;rest</span> rest)
  `(<span class="keyword">lambda</span> (rest)
     rest) <span class="warning">,@rest)</span>

Example:

    (list `a `b `c) =&gt; (a b c)
    (list 1 2 3) =&gt; (1 2 3)

22) <span class="warning">member - see if something is in a list</span>

(<span class="keyword">defmacro</span> <span class="function-name">member</span> (x l <span class="type">&amp;rest</span> test)
  `(<span class="keyword">let</span> ((t (<span class="keyword">if</span> ,test ,test eq)))
     (<span class="keyword">lambda</span> (x l)
       (<span class="keyword">if</span> l
           (<span class="keyword">if</span> (t x (car l))
               l
               (self x (cdr l)))
           ())) <span class="warning">,x ,l))</span>

Example:

    (member 1 `(1 2 3)) =&gt; (1 2 3)
    (member 3 `(1 2 3)) =&gt; (3)
    (member 4 `(1 2 3)) =&gt; ()
    (member `(1 2 3) `(a b c (1 2 3))) =&gt; ()
    (member `(1 2 3) `(a b c (1 2 3)) equal) =&gt; ((1 2 3))  


23) <span class="warning">filter - remove elements from a list based on a predicate</span>

(<span class="keyword">defun</span> <span class="function-name">filter</span> (f l)
  `((<span class="keyword">lambda</span> (l a)
      (<span class="keyword">if</span> l
          (<span class="keyword">if</span> (,f (car l))
              (self (cdr l) (cons (car l) a))
              (self (cdr l) a))
          (reverse a))) <span class="warning">,l))</span>

Examples:

    (filter (<span class="keyword">lambda</span> (x) (eq x 1)) `(1 2 3)) =&gt; (2 3)
    (filter (<span class="keyword">lambda</span> (x) (or (eq x 1) (eq x 3)) `(1 2 3)) =&gt; (2)

<span class="comment-delimiter">;; </span><span class="comment">TO BE CONTINUED
</span>

push
pop
shift
unshift
rotate n
assoc
flatten
sort
defun(?)

rm - remove a symbol from the environment

Example:

    (set `x 1) =&gt; 1 <span class="comment">; define a symbol in the environment
</span>    x =&gt; 1
    (rm `x) =&gt; 1 <span class="comment">; returns the old value of x
</span>    x =&gt; <span class="comment">; Error, undefined symbol
</span>
rmf - remove a macro from the function environment

Example:

    (<span class="keyword">defmacro</span> <span class="function-name">double</span> (x) `(+ ,x ,x)) =&gt; (macro (x) `(+ ,x ,x))
    (double 2) =&gt; 4
    (rmf `double) =&gt; (macro (x) `(+ ,x ,x))
    (double 2) =&gt; <span class="comment">; Error, undefined function
</span>
===============================================================================
===============================================================================

                              ==========
                              |THE MIDS|
                              ==========

       <span class="string">&quot;Because language is the carrier of ideas, it is easy to
   believe that it should be very little else than such a carrier.&quot;</span>

                           -- Louise Bogan

          <span class="string">&quot;Lisp isn't a language, it's a building material.&quot;</span>

                              - Alan Kay

===============================================================================
===============================================================================

=======================
Exercises 0 - TODO List
=======================
push
pop
*todo*
todo
remove
done n

=============================================
Mathematical Exercises 0 - Mortage Calculator
=============================================

==============================
Exercises 1 - Phrase Generator
==============================

==============================================
Mathematical Exercises 1 - Probablistic Primes
==============================================

=================================
Exercises 2 - S-Expression Editor
=================================

==================
Exercises 3 - Life
==================

====================================
Mathmatical Exercises 2 - Ray Tracer
====================================

==========================================
Exercises 4 - GPS (General Problem Solver)
==========================================

=================================================
Exercises 5 - A (Simulated) Arbitrage Trading Bot
=================================================

===============================================================================
===============================================================================

                            ==============
                            |THE ADVANCED|
                            ==============

                    <span class="string">&quot;Language disguises thought.&quot;</span>

                        -- Ludwig Wittgenstein

===============================================================================
===============================================================================

=========================================
Exercises 6 - Boolean Propagator Networks
=========================================

============================================================
Mathematical Exercises 3 - A Calculus Differentiation Engine
============================================================

======================================
Exercises 7 - Fourth, a Stack Language
======================================

======================================
Exercises 8 - Prolog, a Logic Language
======================================

===============================================
Mathmatical Exercises 4 - Multi-Core Ray Tracer
===============================================

===============================================================================
===============================================================================

                               ========
                               |DREAMS|
                               ========

                          <span class="string">&quot;Mind has no end.&quot;</span>

                         -- K. David Harrison

===============================================================================
===============================================================================

===================================
Exercise 9 - A (Simulated) RISC CPU
===================================

==========================================================
Exercise 10 - A Lisp Compiler for the (Simulated) RISC CPU
==========================================================

=====================================
Exercises 10 - A (Simulated) Lisp CPU 
=====================================

================================================
Exercises 11 - A Multi-Core (Simulated) Lisp CPU 
================================================

--

This material is the result of many years of study and research, of
both myself and others.  It's opinions are all mine, built apon
those I have admired in the past, knowingly or unknowningly. I hope
you find the material as useful and entertaining as I have writing it
down and preparing it.

Burton Samograd &lt;root@busfactor1.ca&gt;
Homepage: http://busfactor1.ca/old/old
Facebook: https://www.facebook.com/KRUHFT-17546219842
Twitter: https://twitter.com/kruhft (@kruhft)

Copyright - 2016

All rights reserved.  

If you wish to reproduce this work, please ask my permission first.
Fair use provisions apply.  The computer code contained in this
document can be used for any purpose without restriction.
</pre>

 </body>
</html>
